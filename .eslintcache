[{"/Users/ayumi/git/personal/animations/footprints/src/index.js":"1","/Users/ayumi/git/personal/animations/footprints/src/components/cage.jsx":"2","/Users/ayumi/git/personal/animations/footprints/src/components/app.jsx":"3","/Users/ayumi/git/personal/animations/footprints/src/components/footprint.jsx":"4","/Users/ayumi/git/footprints/src/index.js":"5","/Users/ayumi/git/footprints/src/components/cage.jsx":"6","/Users/ayumi/git/footprints/src/components/footprint.jsx":"7","/Users/ayumi/git/footprints/src/components/app.jsx":"8"},{"size":250,"mtime":1606302518222,"results":"9","hashOfConfig":"10"},{"size":6189,"mtime":1606574421404,"results":"11","hashOfConfig":"10"},{"size":1015,"mtime":1606403516312,"results":"12","hashOfConfig":"10"},{"size":4214,"mtime":1606590048017,"results":"13","hashOfConfig":"10"},{"size":250,"mtime":1606590048017,"results":"14","hashOfConfig":"15"},{"size":6190,"mtime":1606819037612,"results":"16","hashOfConfig":"15"},{"size":4379,"mtime":1606819143205,"results":"17","hashOfConfig":"15"},{"size":1007,"mtime":1606819061217,"results":"18","hashOfConfig":"15"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"21"},"fb2hdx",{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"24","messages":"25","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"26","messages":"27","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"1o6gpcx",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/ayumi/git/personal/animations/footprints/src/index.js",[],["38","39"],"/Users/ayumi/git/personal/animations/footprints/src/components/cage.jsx",[],"/Users/ayumi/git/personal/animations/footprints/src/components/app.jsx",["40"],"/Users/ayumi/git/personal/animations/footprints/src/components/footprint.jsx",["41"],"/Users/ayumi/git/footprints/src/index.js",[],["42","43"],"/Users/ayumi/git/footprints/src/components/cage.jsx",[],"/Users/ayumi/git/footprints/src/components/footprint.jsx",["44"],"import React, {\n  useState,\n  useEffect,\n  useRef,\n  useLayoutEffect\n} from 'react';\nimport PropTypes from 'prop-types';\nimport './footprint.css';\nimport right_foot from '../bird_right.png';\nimport left_foot from '../bird_left.png';\n\nfunction Footprint({ isOn }) {\n  let shouldThrottle = useRef(false);\n  // prev_x and prev_y are at the center at the beginning\n  let prev_x = useRef(Math.max(document.documentElement.clientWidth / 2 || 0,\n                                window.innerWidth / 2 || 0 ));\n  let prev_y = useRef(Math.max(document.documentElement.clientHeight / 2 || 0,\n                                window.innerHeight / 2 || 0) - 100 );\n  let doorCenter_x = useRef(prev_x);\n  let doorCenter_y = useRef(prev_y);\n\n  const [position, setPosition] = useState({\n    x: prev_x.current,\n    y: prev_y.current\n  });\n\n  const speed = 500;\n  const R = document.getElementById('right_foot');\n  const L = document.getElementById('left_foot');\n\n  const getDefaultPosition = (door) => {\n    console.log('getDefaultPosition is running');\n    const {\n      left,\n      top,\n      right,\n      bottom\n    } = door.getBoundingClientRect();\n    doorCenter_x.current = left + (right - left) / 2;\n    doorCenter_y.current = bottom + (bottom - top) / 2;\n    setPosition({\n      'x': doorCenter_x.current,\n      'y': doorCenter_y.current\n    });\n  };\n\n  const _updatePicture = (degree) => {\n    L.classList.toggle('stepping_foot');\n    R.classList.toggle('stepping_foot');\n    R.style.top = `${position['y']}px`;\n    R.style.left = `${position['x']}px`;\n    R.style.transform = `rotate(${degree}deg)`;\n    L.style.top = `${position['y']}px`;\n    L.style.left = `${position['x']}px`;\n    L.style.transform = `rotate(${degree}deg)`;\n  };\n\n  const drawFootprint = () => {\n    const diff_x = position.x - prev_x.current;\n    const diff_y = position.y - prev_y.current;\n\n    // if the cursor is moving, update prev_x & prev_y and redraw.\n    if (diff_x !== 0 || diff_y !== 0) {\n      prev_x.current = position.x;\n      prev_y.current = position.y;\n      // MEMO: rad -> deg. NOTE: The direction of y axis is opposite to math x-y\n      // plane. The returned value is +/- flipped. CSS rotation feature change\n      // the angle in clockwise direction whereas it's opposite in math degree\n      // system. Leave this +/- flipped value as it is to adjust to CSS system.\n      const new_degree = (Math.atan2(diff_y, diff_x) * 180 / Math.PI) + 90;\n      _updatePicture(new_degree);\n    }\n  };\n\n  // initial setup\n  // useLayoutEffect(() => {\n  //   getDefaultPosition();\n  // },[]);\n\n  // keeping an eye on the change of isOn\n  useEffect(() => {\n    const getCursor = event => {\n      if (!shouldThrottle.current) {\n        shouldThrottle.current = true;\n        setPosition({\n          x: event.clientX,\n          y: event.clientY\n        });\n        setTimeout(() => shouldThrottle.current = false, speed);\n      }\n    };\n\n    if (isOn) {\n      document.addEventListener('mousemove', getCursor);\n    } else {\n      document.removeEventListener('mousemove', getCursor);\n      const door = document.getElementById(\"door\");\n      door ? getDefaultPosition(door) :\n        setPosition({\n          x: prev_x.current,\n          y: prev_y.current\n        })\n    }\n    return () => document.removeEventListener('mousemove', getCursor);\n  }, [isOn]);\n\n  // keep updating while isOn is true, keeping an eye on the change of position\n  useLayoutEffect(() => {\n    if (isOn) {\n      drawFootprint();\n    }\n  }, [position]);\n\n  return (\n    <>\n      <img\n        src = {right_foot}\n        className = 'component react--right_foot foot stepping_foot'\n        id = 'right_foot'\n        style = {\n          isOn ?\n          {\n            'display': 'inline',\n            'left': position.x,\n            'top': position.y\n          } :\n          {\n            'display': 'none',\n          }\n        }\n        alt = 'right foot'\n      />\n      <img\n        src = {left_foot}\n        className = 'component react--left_foot foot'\n        id = 'left_foot'\n        style = {\n          isOn ?\n          {\n            'display': 'inline',\n            'left': position.x,\n            'top': position.y\n          } :\n          {\n            'display': 'none'\n          }\n        }\n        alt = 'left foot'\n      />\n    </>\n  );\n}\n\nexport default Footprint;\n\nFootprint.propTypes = {\n  isOn: PropTypes.bool.isRequired\n};\n","/Users/ayumi/git/footprints/src/components/app.jsx",[],{"ruleId":"45","replacedBy":"46"},{"ruleId":"47","replacedBy":"48"},{"ruleId":"49","severity":1,"message":"50","line":1,"column":38,"nodeType":"51","messageId":"52","endLine":1,"endColumn":44},{"ruleId":"53","severity":1,"message":"54","line":105,"column":6,"nodeType":"55","endLine":105,"endColumn":16,"suggestions":"56"},{"ruleId":"45","replacedBy":"57"},{"ruleId":"47","replacedBy":"58"},{"ruleId":"53","severity":1,"message":"59","line":112,"column":6,"nodeType":"55","endLine":112,"endColumn":16,"suggestions":"60"},"no-native-reassign",["61"],"no-negated-in-lhs",["62"],"no-unused-vars","'useRef' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'drawFootprint' and 'isOn'. Either include them or remove the dependency array.","ArrayExpression",["63"],["61"],["62"],"React Hook useLayoutEffect has missing dependencies: 'drawFootprint' and 'isOn'. Either include them or remove the dependency array.",["64"],"no-global-assign","no-unsafe-negation",{"desc":"65","fix":"66"},{"desc":"65","fix":"67"},"Update the dependencies array to be: [drawFootprint, isOn, position]",{"range":"68","text":"69"},{"range":"70","text":"69"},[3317,3327],"[drawFootprint, isOn, position]",[3482,3492]]